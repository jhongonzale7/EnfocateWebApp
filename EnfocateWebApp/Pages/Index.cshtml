@page
@model EnfocateService.Pages.IndexModel
@{
    ViewData["Title"] = "Enfócate Web App";
}

@section Styles {
    <!-- Google Font para el reloj digital -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Container full height menos espacio para footer */
        .main-container {
          min-height: calc(100vh - 120px);
        }
    </style>
}

<div class="container main-container d-flex justify-content-center align-items-center">
    <div class="card text-center p-4" style="max-width: 360px; width: 100%;">
        <h1 class="mb-2">Enfócate</h1>
        <h2 id="timerDisplay" class="mb-3">00:00</h2>
        <h3 id="statusMessage" class="mb-4">@Model.StatusMessage</h3>

        <!-- Audio para notificaciones -->
        <audio id="workAudio" src="~/sounds/alert.mp3" preload="auto" asp-append-version="true"></audio>

        <!-- Solo dos campos y un botón -->
        <form id="settingsForm" class="row gx-2 gy-2 justify-content-center mb-4">
            <div class="col-auto">
                <input id="workInput" type="number" min="1"
                       class="form-control text-center"
                       value="@Model.Settings.WorkDurationMinutes"
                       aria-label="Trabajo (min)"
                       placeholder="Trabajo">
            </div>
            <div class="col-auto">
                <input id="breakInput" type="number" min="1"
                       class="form-control text-center"
                       value="@Model.Settings.BreakDurationMinutes"
                       aria-label="Descanso (min)"
                       placeholder="Descanso">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-success">Aplicar</button>
            </div>
        </form>

        <div>
            <button id="startButton" class="btn btn-primary me-2">Iniciar</button>
            <button id="pauseButton" class="btn btn-outline-secondary me-2">Pausar</button>
            <button id="resetButton" class="btn btn-danger">Reiniciar</button>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Inyectar valores iniciales en segundos
        window.workDuration  = @Model.Settings.WorkDurationMinutes * 60;
        window.breakDuration = @Model.Settings.BreakDurationMinutes * 60;
    </script>

    <!-- Lógica del temporizador -->
    <script src="~/js/pomodoroTimer.js" asp-append-version="true"></script>
}
